# 中級課題 Clientクラスのバグ修正
Clientクラスはsend_requestメソッドを呼び出されると、サーバに対しリクエストを送信し、その結果を戻り値として返します。


send_requestの具体的な戻り値は以下のようになっています。
* 正常に動作した場合は文字列’ok’を返します。
* サーバに送るアクセストークンの有効期限が切れている場合は、異常動作として、文字列'permission error'を返します。トークンは1/3の確率で有効期限が切れます。
* サーバに対して単位時間にリクエストを送りすぎた場合は、異常動作として文字列'frequency request error'を返します。このエラーは1/5の確率で発生します。


トークンの有効期限が切れた場合は@access_tokenに対してrefresh!メソッドを実行することで、再びトークンが有効になります。refresh!を実行した直後の第1回目のリクエストは'permission error'になることはありません。


リクエストを送りすぎた場合はリクエストの送信を一時的に休止する必要があります。Sleeprクラスのクラスメソッドであるsleepメソッド実行することで、一時的にリクエストの送信を休止させることができます。


そこで、refresh!メソッドとsleeperメソッドを駆使してsend_requestメソッドを書き換えることで、send_requestメソッドが常に正常に動作する状態にしてください。ただし、client.rb以外のファイルは書き換えないようにしてください。


# 動作検証の方法
動作検証のためにrspecを利用した自動テストスクリプトを準備しています。
テストのすべての検証(expectation)が成功(green)になれば正常に動作したことを確認できます。


以下のコマンドを実行してrspecをインストールしてください。  
`$ bundle --path vendor/bundle`


実行方法はfix_client_serverディレクトリの直下で、以下のコマンドを実行してください。  
`$ bundle exec rspec`


# 開発で利用したrubyとbundlerのバージョン
ruby 2.3.1  
Bundler 1.13.1


# プルリクエストに記述してほしいこと
どういった考えで実装を行ったのかを、できるだけ詳しく記述してください。
